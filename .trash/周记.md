 ```dataviewjs
const durNum = 7;

const dayMin = dv.date("now").plus({days: -durNum});

var pages = dv.pages(`-"笔记/wsm/日记"`)
	.filter(p => p.file.mday > dayMin)
	.sort(p => -p.file.mtime);

function processTitle(p) {
	let mc_tag = "💙 " // created or modified
	if (p.file.mday.ts == p.file.cday.ts) {
		mc_tag = "💜 "
	}
	let alias = p.file.name;
	if (p.aliases) {
		alias = p.aliases[0];
	}else if (p.alias) {
		alias = p.alias;
	}
	let paths = p.file.path.split("/");
	let path = paths.length >= 2 ? paths[0] + "/" : "";

	let tags = [];
	p.file.tags.forEach(t => {
		// let flag = true;
		// for (let i in tags) {
		// 	if (tags[i].startsWith(t)) {
		// 		flag = false;
		// 		break;
		// 	}
		// }
		if (tags.length == 0 || !tags[tags.length-1].startsWith(t+"/")) {
			tags.push(t);
		}
	});

	let ret = `[[${p.file.name}]]`;
	if (tags.length > 0) {
		ret += `${tags.join(", ")}`
	}
	return ret;
}

 //dv.el("h3", `recent PAPERs (${durNum})`)
 //dv.el("div", `in ${durNum} days:`)
dv.table(["本周日记"],
	pages.map(p => [
		processTitle(p),
		// p.tags
		]
	)
)

```



 ```dataviewjs
const durNum = 7;

const dayMin = dv.date("now").plus({days: -durNum});

var pages = dv.pages(`-"笔记"`)
	.filter(p => p.file.mday > dayMin)
	.sort(p => -p.file.mtime);
const expages = dv.pages(`-"wsm"`) 
const rows = [] 
for (const page of pages) 
{ // 将所有带 #Reference 标签的页面从所有页面中剔除 
	if (expages.includes(page) == false) 
		{ rows.push([page.file.link]) 
		} 
}
function processTitle(p) {
	let mc_tag = "💙 " // created or modified
	if (p.file.mday.ts == p.file.cday.ts) {
		mc_tag = "💜 "
	}
	let alias = p.file.name;
	if (p.aliases) {
		alias = p.aliases[0];
	}else if (p.alias) {
		alias = p.alias;
	}
	let paths = p.file.path.split("/");
	let path = paths.length >= 2 ? paths[0] + "/" : "";

	let tags = [];
	p.file.tags.forEach(t => {
		// let flag = true;
		// for (let i in tags) {
		// 	if (tags[i].startsWith(t)) {
		// 		flag = false;
		// 		break;
		// 	}
		// }
		if (tags.length == 0 || !tags[tags.length-1].startsWith(t+"/")) {
			tags.push(t);
		}
	});

	let ret = `<span style="color:gray">${mc_tag}</span>${path}[[${p.file.name}]]`;
	if (tags.length > 0) {
		ret += `${tags.join(", ")}`
	}
	return ret;
}

 //dv.el("h3", `recent PAPERs (${durNum})`)
 //dv.el("div", `in ${durNum} days:`)
dv.table(["最近笔记"],
	pages.map(p => [
		processTitle(p),
		// p.tags
		]
	)
)

```



 ```dataviewjs
const durNum = 7;

const dayMin = dv.date("now").plus({days: -durNum});

var pages = dv.pages(`-"笔记"`)
	.filter(p => p.file.mday > dayMin)
	.sort(p => -p.file.mtime);
const expages = dv.pages(`-"wsm"`) 
const rows = [] 
for (const page of pages) 
{ // 将所有带 #Reference 标签的页面从所有页面中剔除 
	if (expages.includes(page) == false) 
		{ rows.push([page.file.link]) 
		} 
}
function processTitle(p) {
	let mc_tag = "💙 " // created or modified
	if (p.file.mday.ts == p.file.cday.ts) {
		mc_tag = "💜 "
	}
	let alias = p.file.name;
	if (p.aliases) {
		alias = p.aliases[0];
	}else if (p.alias) {
		alias = p.alias;
	}
	let paths = p.file.path.split("/");
	let path = paths.length >= 2 ? paths[0] + "/" : "";

	let tags = [];
	p.file.tags.forEach(t => {
		// let flag = true;
		// for (let i in tags) {
		// 	if (tags[i].startsWith(t)) {
		// 		flag = false;
		// 		break;
		// 	}
		// }
		if (tags.length == 0 || !tags[tags.length-1].startsWith(t+"/")) {
			tags.push(t);
		}
	});

	let ret = `<span style="color:gray">${mc_tag}</span>${path}[[${p.file.name}]]`;
	if (tags.length > 0) {
		ret += `${tags.join(", ")}`
	}
	return ret;
}

 //dv.el("h3", `recent PAPERs (${durNum})`)
 //dv.el("div", `in ${durNum} days:`)
dv.table(["最近笔记"],
	pages.map(p => [
		processTitle(p),
		// p.tags
		]
	)
)

```



