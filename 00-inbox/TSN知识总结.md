---
created: 2024-04-26T09:56
updated: 2024-04-29T12:26
tags:
  - 笔记
  - 笔记/学习笔记
  - 待归档
---

> 注意重点在于调度问题等，比如吞吐量，等待，延迟等等

# 背景
一页就行
时间敏感网络（TSN）是 IEEE 802.1 任务组开发的一套数据链路层 协议规范，用于构建更可靠的、低延迟、低抖动的以太网。
![image.png](https://gcore.jsdelivr.net/gh/wsm6636/pic/202404261554921.png)

TSN 的数据调度是保证时间敏感的基础，它的核心思想是基于不同 的整形器（Shaper）来进行不同应用场景的流控制。IEEE 802.1 提供了一 系列的标准来确保可靠性的数据传输，一般主要包括以下几种情况。
（1）基于信用的整形器 CBS（Credit-Based Shaper）
CBS 整形器在 IEEE 802.1Qav-2009《IEEE 标准 局域网和城域网 虚 拟桥接局域网 修正 12：时效性流的转发和队列增强》中规定，它可以通 过对不同队列赋予一个“信用值”来进行数据传输的调度，不同传输队列 的“信用值”会随着数据传输的过程而自动更改，这样就会保证优先级较 低的数据也会得到数据传输的机会
CBS 整形器主要在汽车工业得到应用， 但相对工业应用而言还是具有较大的平均延迟。
（2）时间感知的整形器 TAS（Time Awareness Shaper）
TAS 一 般 分 为 两 种： 抢 占 式 和 非 抢 占 式。 非 抢 占 式 基 于 IEEE 802.1Qbv，通过门控制列表（GCL）周期性的控制门的开 / 关
在 IEEE 802.1Qbv的实现中，那些需要实时传输的数据流通常被第一个安排进行传输，需要在时间调度配置时预先予以确定，而与此同时，还需要为非周期性的数据预留一个通道。注意，这里的非周期性数据并不是低优先级的， 相反，它的优先级更高，一旦数据需要发送，那么就需要立刻安排调度。
也就是无论是周期性的数据还是非周期性的预留数据，都需要预留通道，TSN网络中还存在一些其他的数据，这些数据也是非周期性的，但是没有足够的预留通道，那么这时的数据传输就是“Best-eﬀort”的数据调度。尽管这些数据是非周期性的，但是可能他们的优先级很高，因此，为了确保严格时间要求的数据传输，IEEE802.1Qbv给每个周期预留了一个“标准以太网”帧作为保护带宽。


节省带宽，IEEE 802.1Qbu-2016《IEEE 标准 局域网和城域网 网桥和桥接网络 修正 26: 框架优先》规定了抢占式的 TAS 整形器，在保 证时间敏感任务数据可调度的前提下，尽可能的节省带宽。
抢占式策略 的原理是暂停非时间敏感型数据的传输过程，转而传输时间敏感型数据， 时间敏感型数据传输完成后，再继续传输非时间敏感型数据，主要解决 低优先级队列对于高优先级队列传输的影响。需要注意的是，抢占式机 制需要网桥节点和终端节点支持 LLDP。
（3）周 期 性 排 队 与 转 发 机 制 整 形 器 CQF（Cyclic Queuing and Forwarding）
CQF 整 形 器 基 于 IEEE 802.1Qch-2017《IEEE 标 准 局 域 网 和 城 域 网 网桥和桥接网络 修正 29: 循环排队和转发》。


（4）异步数据流整形器 ATS（Asynchronous Traffic Shaper）


为了解决非周期性数据的传输零拥堵问题


并且针 对周期性的数据传输而言，网络的严格时钟同步和队列保护带宽等原因无 法最大的使用到网络带宽，ATS 进一步优化那些对于时间同步非严苛任 务的带宽利用。


面向时间敏感网络应用，IEEE 802.1Qcc-2018《IEEE 标准 局域网和 城域网 网桥和桥接网络 修正 :

