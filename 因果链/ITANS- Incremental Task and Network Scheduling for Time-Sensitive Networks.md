---
created: 2023-07-21T12:27
updated: 2024-02-13T22:40
tags:
  - 笔记
  - 笔记/文献笔记
---

# ITANS: Incremental Task and Network Scheduling for Time-Sensitive Networks

| Title                 | ITANS: Incremental Task and Network Scheduling for Time-Sensitive Networks |
| --------------------- | -------------------------------------------------------------------------- |
| Journal or Conference | IEEE Open Journal of Intelligent Transportation Systems                    |
| Authors               | Anna Arestova; Wojciech Baron; Kai-Steffen J. Hielscher; Reinhard German   |
| Pub. date             | 2022                                                                       |
| DOI                   | [10/gsfbsh](https://doi.org/10/gsfbsh)                                     |
| Level                 |                                                                            |

# 	ITANS: Incremental Task and Network Scheduling for Time-Sensitive Networks——ITANS：时间敏感网络的增量式任务和网络调度

## 背景

自动驾驶，分布式系统变得复杂。数据通过网络传输

终端设备中的TSN：在我们的调度方法中，我们至少提到了MQPRIO-ETF组合。但是，我们倾向于并建议使用TAPRIO-ETF配置，以避免与来自同一终端设备中生成的非关键流量类别的数据包发生冲突。

> 最早的TxTime优先(ETF)，允许用户在应用程序级别上确定某个流量类别的网络数据包何时应该从流量控制缓冲区出列到NIC的硬件队列中。
>
> ETF算法通过对每个数据帧的到达时间和发送时间进行比较，选择最早到达且可以发送的数据帧，将其发送到网络中
>
> 多队列优先级(MQPRIO)
>
> 时间感知优先级整形器(TAPRIO)

## introduction

即将到来的创新需要稳步增加的新功能，高度互联的智能设备，如传感器和执行器，以及通过通信网络传输的数据量不断增加。未来的工业4.0项目就是这一趋势的推动者。它推动了工业生产的数字化，并努力实现传感器、执行器和机器之间更好的连接[1]、[2]。这导致系统中的数据增长，给协调处理和网络系统上的信息量和功能带来了新的挑战，并使遵守时间要求变得更加困难。这两种功能都依赖于紧密耦合的处理链，这些处理链由雷达、激光雷达和相机[3]等传感器组成，这些传感器感知世界，并进一步处理任务，为执行器生成适当的输出。此外，铁路领域还推动了研究，以提高自动列车运行(ATO)系统的自动化级别，引入新的应用程序和依赖项，以实现半自动甚至无人值守的列车运行[4]。

特别是，如果来自上述安全相关领域的任务通过所谓的因果链(CEC)中的数据依赖相互关联，则端到端定时行为变得更相关且更难处理。相关的端到端指标是端到端系统响应时间和最长数据寿命[5]。前者表示系统对价值变化的反应[6]。相反，数据年龄描述了输入数据影响CEC输出的最长时间[7]。传感器到执行器延迟约束是这种端到端链的已知代表[7]。

满足端到端的需求不仅仅是对单个设备的调度和分析，而是对整个分布式系统的检查。这还包括另外的通信系统。最近的发展需要在以太网之上采用新的通信技术，如时间敏感网络(TSN)[8]，这些技术似乎很有希望为不同的安全关键领域实现未来的通信系统，并为未来的创新建立一个共同和标准化的开发基础。尽管TSN为实现可靠的实时通信提供了有益的机制，但它仍然依赖于适当的配置和调度。时间敏感网络中的网络流调度和任务调度是一个被广泛探索的领域。在分布式系统中，链式任务和网络流的组合调度的生成是一个很少被解决的多目标问题。它需要适应应用的技术和仔细的分析。一些工作从另一个角度看待这个问题：他们提供了形式化的方法来分析已经调度的CEC的最大端到端延迟[6]、[9]。还有一些奇异的论文，借助整数线性规划(ILP)[10]和可满足性方法[11]等精确方法来解决任务和网络调度的组合问题，这些方法能够提供最优解，但根据问题的复杂程度，可能会导致长达几个小时的运行时间。通常，最佳解决方案并不是必需的。这些工作也没有考虑TSN机制的特点。由于TSN还没有被认为是与CEC相结合的，而且在联合任务和网络调度领域缺乏启发式解决方案，我们想要引入一种启发式方法ITANS来使用时间感知整形器(TAS)来增量地调度时间敏感网络中的多速率CEC。重点首先考虑系统响应时间的端到端截止日期。在这项工作中，我们将解决在调度分布式和链式任务和网络流时出现的最常见的困难。此外，还将介绍分布式实时系统的任务流和网络流的通用任务模型。此外，我们将应用最早开始时间(EST)和最晚开始时间(LST)的概念，从而能够更快地找到可行和无效的解决方案。最后，我们将通过从汽车领域选择的用例来演示，ITANS启发式允许在平均几秒钟内调度组织在不同长度和不同系统配置的CEC中的一千多个任务和网络流。我们实现了多速率CEC的高成功率，并为同质和谐和CEC提供了更好的结果。此外，我们能够为均匀的CEC提供低抖动。

## 动机

TSN中网络流结合任务链

在分布式系统中，链式任务和网络流的组合调度的生成是一个很少被解决的多目标问题。

在联合任务和网络调度领域缺乏启发式解决方案，我们想要引入一种启发式方法ITANS来使用时间感知整形器(TAS)来增量地调度时间敏感网络中的多速率CEC。

## 贡献

重点首先考虑**系统响应时间的端到端截止日期**。在这项工作中，我们将解决在调度分布式和链式任务和网络流时出现的最常见的困难。此外，还将介绍分**布式实时系统的任务流和网络流的通用任务模型**。此外，我们将**应用最早开始时间(EST)和最晚开始时间(LST)的概念**，从而能够==更快地找到可行和无效的解决方案==。最后，我们将通过从汽车领域选择的用例来演示，ITANS启发式允许在平均几秒钟内调度组织在不同长度和不同系统配置的CEC中的一千多个任务和网络流。我们实现了多速率CEC的高成功率，并为同质和谐和CEC提供了更好的结果。此外，我们能够为均匀的CEC提供**低抖动**。

>  此外，802.1 Qbv引入了保护频带。它们在其门关闭时间之前和其他门打开时间之前的特定间隔内阻止分组的传输。此机制可防止非关键流量在其自己的传输窗口中延迟关键流量。

> TAS时间同步

## 目标

我们的目标是使用ITANS算法**为每个TSN流指定通过通信网络的传输偏移量和确定性端到端时间**。

> 使用了因果链，可参考

## 任务模型

==处理、网络资源和任务组成的分布式实时系统的系统模型。==

此外，我们将应用**最早开始时间(EST)和最晚开始时间(LST)**的概念，从而能够更快地找到可行和无效的解决方案。

在[20]中应用于TSN流的无等待原则，不会遇到与其他流的任何干扰，并且它们不必在穿越的端口的出口队列中等待。不允许抢占网络任务

![image-20230322155337054](https://cdn.jsdelivr.net/gh/wsm6636/pic/202303221553137.png)

在我们的例子中，==**端到端时间**主要指的是系统的**最大响应时间**。====**超周期**通常是同一核心上的任务周期的最小公倍数，如果CEC具有网络任务，则是通信网络的超周期。==在此之后重复任务调度[30]。

> 超周期（Super Cycle）指的是一种在时序网络（TSN）中用于实现周期性流量调度的机制。在TSN网络中，周期性流量通常需要按照固定的时间间隔进行发送，以保证数据传输的可靠性和实时性。超周期机制**允许多个周期性流量在同一时间内进行调度**，从而提高了网络的带宽利用率和数据传输的效率。在超周期机制中，周期性流量的时间间隔被分为多个相等的时间片，每个时间片称为超周期。**超周期的长度通常是所有周期性流量的最小公倍数**，以确保所有流量都能够按照固定的时间间隔进行调度。超周期机制通常用于TSN网络中的时隙预定协议（Scheduling Protocol），以保证实时数据传输的效率和可靠性。

**.CEC限制我们区分处理任务和网络任务**。每个CEC都有一个生产者任务以及数量可变的中间任务和最后任务。生产者任务和任务链的所有最后任务始终是处理任务。中间任务可以是处理任务或网络任务。每个网络任务正好有一个前置任务和数量可变的后继任务。网络任务的前置任务和后继任务都是处理任务。处理任务可以在可变数量的处理任务(相同的终端设备)以及网络任务之后和之前。每个任务都是一个或多个CEC的成员。**CEC的处理任务可以有不同的周期性激活模式，同质(相同周期)、谐波(彼此的倍数)或非谐波。**相反，网络任务的周期是相互协调的。所有CEC都是无环的，例如，从传感器到执行器，或者反过来。

对于每个CEC CECI，我们必须确定形成作业级依赖的任务∈Ti的作业，并最小化端到端延迟，如图3和图6所示。要确定最坏情况的端到端延迟，我们必须形成可行的作业级路径。每条路径必须在时间域中提供前向可达性[6]。不允许向后跳跃。为了确定响应时间，我们在依赖路径上搜索从第一个作业到最后一个作业的最短可行路径。这种语义在[6]中被描述为先到先路径延迟。在系统响应时间的情况下，存在hpi/pa路径，其中hpi是∈τ的超周期，pa描述生产者任务τaτt1的周期。

![image-20230304214625177](https://gcore.jsdelivr.net/gh/wsm6636/pic/202307211401792.png)

![image-20230323103437803](https://cdn.jsdelivr.net/gh/wsm6636/pic/202303231034928.png)



![image-20230323103753092](https://gcore.jsdelivr.net/gh/wsm6636/pic/202307211401314.png)

然而，最长路径的最佳值可能会使另一条路径长到足以错过LSTk。如果τk的周期明显大于其前身的周期，则可能是这种情况。这将使路径扩大约Pk+Ej k。为了避免这种情况，我们最初将ESTk设置为最长路径的最佳值，并递增地将其移位，直到我们在任何路径上找到不违反LSTk的可行值。

EST和LST值的定义不能保证可行的计划。它支持缩小特定任务调度顺序的解空间，并更快地消除无效解。

## 算法

### **时间资源的分配**

### **处理任务资源的管理**

任务k的周期pk，在超周期phck中找合适的时隙，需要至少调度phck/pk次 （取商）

偏移量是ESTk%pk（前面过去了多少个周期的剩余，取余）

如果任务k在超周期内找到了合适的时隙，空闲时隙更新为：原空闲时隙-任务k的WCET-延时

### **网络任务资源的管理**

 在出口端口上，一个管理单元的大小相当于网络中最小的发生任务周期TASCCycle。

关键流量/网络任务的周期必须是TASCCycle的整数倍

在我们的情况下，大小包括链路上的流的传输持续时间加上帧间间隙。

![image-20230323205834408](https://gcore.jsdelivr.net/gh/wsm6636/pic/202307211401040.png)

### **生成门禁列表**

GCL是在调度算法找到可行解之后生成的。GCLS中的TAS周期对应于TASCCycle。在一个TASCCycle之后，在每个支持TSN的出口端口或排队规则中重复GCL计划。

为了构造GCL，我们从端口的所有管理单元收集与网络任务相关的所有占用的时隙，并应用模运算符将这些时隙的开始和结束时间转换到TASCcle的范围。

此外，在每个关键插槽之后，我们还必须为不太关键的插槽创建至少一个GCL条目。

### **整体调度流程**

#### **计划所有任务**

**算法1**描述了如何调度所有CEC的任务。

该方法的第一步是**生成可规划的任务列表**(第1行)。该集合包含其EST和LST值已定义的任务。这主要说明了第一个迭代中的所有生产者任务。在其他迭代中，初始任务集可能包含中间任务或最后任务。后续任务将在计划运行期间附加到任务集。

在第二步中，我们按照**任务移动性和时间段对任务集进行排序**。这种方法导致了紧急任务和小周期任务首先要计划的任务。优先级越小，任务就越需要在其分配的核心的超时期内进行规划。如果首先计划周期较长的任务，它们可能会占用太多空间，以至于周期较小的任务要么会经历很大的抖动，要么找不到合适的时间段。

图15示出具有最低周期的任务τp 4被调度在任务τp 2之后。在第一种情况下，它找不到可能的插槽。当在τp2之前规划τp4时，我们可能会得到一个可行的计划，如第二个场景所示。

在**从任务集中获得第一个任务之后**(第4行)，我们**尝试计划它**(第5行)。对于给定的输入任务，plan ProcessingTask函数**在整个超周期内搜索合适的时隙**(另请参见第V-B节)。如果这个过程成功的话。即，**如果任务找到足够的时隙并且尊重LST值，则后续任务将在过程ActiateSuccessorTasks中被激活**(参见算法2)。如果不能计划任务，则后继器的激活失败，或者如果超过LST，如图16所示，任务释放其槽，并由PlanProcessingTask报告不可行的计划过程。在这种情况下，应用第V-F节中解释的重新调度功能(第7行)。

**如果重新调度试验没有找到可行的解决方案，则调度迭代将被终止，且PlanAllTasks函数报告不可能的规划过程。**

**算法2**描述了计划任务τp k的后继者如何在方法ActiateSuccessorTask中配置和激活。

首先，我们确定作业级别依赖项中每个后继者的EST值(第2行)。如果获得的EST值超过LST，则报告失败。如果τp k的后续任务是网络流(第6行)，则我们在方法PlanNetworkTask中计划流(参见第V-C节)。函数plan NetworkTask设置传输偏移量和WCTT。之后，我们尝试设置流的每个后继者的EST边界，并将它们附加到任务集(第9-14行)，如果它们的所有前继者都已被调度。如果τp k的后继者不是流，我们将在可能的情况下将其附加到任务集(第20行)。

### repair function

失败的一个常见原因是，在同一核心或出口端口上，具有较高周期或WCET/WCTT的任务被调度在具有较低值的任务之前。另一个常见原因是，按照CEC内的任务顺序进行规划没有奏效。因此，我们确定了不同的重新安排策略。总而言之，对策是：交换顺序

如果冲突的任务是同一CEC的一部分，我们尝试改变链中任务的顺序，并调度失败任务和失败任务本身的所有前置任务。

如果冲突的任务是其他CEC的一部分，ITANS将失败任务的CEC放在冲突的CEC之前，并开始新的迭代。

经验表明，在失败任务的核心或出口端口内重新调度，以及在CEC内重新调度，已经解决了大部分调度问题。

## 评估

在这一部分中，我们通过交替不同的参数来评估所提出的ITANS启发式算法。我们考察了成功率、运行时和抖动开发。此外，我们还将ITANS与其他方法进行了比较。

在这些域中，大多数数据依赖路径都是传感器到执行器的路径[7]。这种CEC涉及许多复杂的步骤，如[37]中所述和详细说明：

抖动是一个重要因素，特别是在运动控制中。在我们的实验中，我们研究了均匀CEC的端到端延迟的抖动。

路径比率值（最短路径长度/最长路径长度）越高，抖动越小。图19示出了同质CEC的路径比。

CEC的调度结合了不同的研究领域。我们希望解决应用TAS机制、联合任务和网络规划以及CEC来处理TSN流调度的相关工作。在时间敏感网络中的流计划领域，出现了不同的调度方法。

## 相关工作

CEC的调度结合了不同的研究领域。我们希望解决应用TAS机制、联合任务和网络规划以及CEC来处理TSN流调度的相关工作。在时间敏感网络中的流计划领域，出现了不同的调度方法。Craciunas等人。[41]为符合802.1Qbv的网络制定调度约束。

## 不足

占用的时隙是GCL条目的代表。在找到适当的插槽后，将配置相应设备上的GCL条目，以便在插槽启动时打开关键出口队列的门(参见第V-D节)。如果流在槽开始之前到达，它将不得不等待。这种情况将导致需要缓冲流并导致排队延迟。因此，这将违反不等待原则。将ITANS扩展到考虑排队延迟是未来工作的主题。

> 通过EST和LST，搜索可行解（可插入时隙）

***

# 笔记

## 1 论文创新在于

## 2 解决了什么问题

## 3 方法

## 4 不足&可继续研究

## 5 可参考

## 6 思考

Referred in <a href="zotero://note/u/HWG3PU5P/?ignore=1&#x26;line=-1" rel="noopener noreferrer nofollow" zhref="zotero://note/u/HWG3PU5P/?ignore=1&#x26;line=-1" ztype="znotelink" class="internal-link">cause-effect chain</a>
